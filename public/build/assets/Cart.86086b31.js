import{d as S,I as A,k as m,o as n,e as c,a as t,g as l,t as i,F as N,i as Y,h as r,c as u,w as a,b as p,Y as $,z as h,f as U,x as M,J as z}from"./app.b18553c3.js";import{d as v}from"./dayjs.min.e58db3b5.js";import{a as B,_ as I}from"./CheckoutButton.c5a80b8b.js";import{_ as x}from"./DangerButton.44dd0bcc.js";import{_ as J}from"./PrimaryButton.cb38a830.js";import{a as P}from"./DialogModal.f3b0c6f7.js";import{_ as j}from"./InputLabel.981ac600.js";import{_ as G}from"./TextInput.9434f154.js";const K={class:"px-3"},Q=t("p",{class:"text-2xl font-bold"},"Current Order",-1),W={class:"text-xl text-slate-500 font-semibold"},X={key:0},Z={class:"mt-8"},tt={class:"grid grid-cols-4 gap-4 mt-4",key:"data.id"},et=["src"],st={key:1,src:"https://via.placeholder.com/200x200",alt:""},ot={class:"flex flex-col col-span-3"},nt={class:"font-bold text-lg leading-6 flex-1"},lt={class:"flex justify-between items-center mt-5"},it={class:"text-orange-600 font-bold"},at={class:"flex gap-3"},dt=["onClick"],ct={class:"text-sm cursor-pointer"},_t={class:"text-slate-600"},rt={class:"text-sm cursor-pointer"},ut={class:"text-slate-600"},mt={class:"mt-3"},ft={key:0,class:"text-sm text-red-500 font-bold"},pt=t("span",null," Not sent to kitchen yet",-1),ht=t("span",null,null,-1),xt=[pt,ht],bt={key:1,class:"text-sm text-green-600 font-bold"},kt=t("span",null,"Order is done at ",-1),vt={class:"font-normal"},yt={key:2,class:"text-sm text-green-600 font-bold"},gt=t("span",null,"Processed at ",-1),wt={class:"font-normal"},Ct={key:3,class:"text-sm text-green-600 font-bold"},Dt=t("span",null,"Sent to kitchen at ",-1),St={class:"font-normal"},Nt=t("div",{class:"border-b bg-slate-100 mt-4"},null,-1),$t={class:"mt-8 py-6 bg-slate-200 rounded-lg text-slate-500"},Bt={class:"flex justify-between"},It=t("p",{class:"px-6"},"Sub Total",-1),jt={class:"px-6 font-bold"},Tt={class:"flex justify-between mt-3"},qt=t("p",{class:"px-6"},"Total Discount",-1),Ft={class:"px-6 font-bold"},Lt={class:"flex justify-between mt-3"},Vt=t("p",{class:"px-6"},"After Disc",-1),Et={class:"px-6 font-bold"},Ht={class:"flex justify-between mt-3"},Ot=t("p",{class:"px-6"},"Tax 10%",-1),Rt={class:"px-6 font-bold"},At=t("div",{class:"flex justify-between my-4"},[t("div",{class:"bg-white rounded-full w-6 h-6 -ml-3"}),t("div",{class:"flex-1"}),t("div",{class:"bg-white rounded-full w-6 h-6 -mr-3"})],-1),Yt={class:"flex justify-between mt-3"},Ut=t("p",{class:"px-6 font-bold text-lg text-slate-700"},"TOTAL",-1),Mt={class:"px-6 font-bold text-lg text-slate-700"},zt={key:1,class:"mt-16"},Jt=t("img",{src:"/img/no-order.svg",alt:""},null,-1),Pt=[Jt],Gt=t("div",{class:"font-semibold"},"Add / Edit Note",-1),Kt={class:"flex justify-end gap-3"},ne={__name:"Cart",props:{carts:{type:Object},table_id:{type:String}},setup(y){const d=y,f=S(!1),_=A({id:"",notes:"",discount:""}),T=m(()=>{let e=0;return d.carts.forEach(o=>{e+=o.food_detail.price*o.quantity}),e}),k=m(()=>{let e=0;return d.carts.forEach(o=>{e+=o.food_detail.price*o.quantity*(100-o.discount)/100}),e}),q=S(.1),g=m(()=>k.value*q.value),F=m(()=>{let e=0;return d.carts.forEach(o=>{e+=o.food_detail.price*o.quantity*o.discount/100}),e}),w=m(()=>k.value+g.value),L=()=>{$.fire({title:"Are you sure?",text:"You will checkout all items",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, checkout all items!"}).then(e=>{e.isConfirmed&&h.Inertia.post(route("order.checkout"),{data:{carts:d.carts,table_id:d.table_id,total:w.value}},{preserveScroll:!0})})},C=e=>{h.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity+1}},{preserveScroll:!0})},D=e=>{h.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity-1}},{preserveScroll:!0})},V=e=>{f.value=!0,_.notes=e.notes,_.id=e.id,_.discount=e.discount},E=()=>{h.Inertia.post(route("order.note"),{data:{id:_.id,notes:_.notes,discount:_.discount}},{preserveScroll:!0}),f.value=!1},H=()=>{$.fire({title:"Are you sure?",text:"You will sent all items to kitchen",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, sent all items to kitchen!"}).then(e=>{e.isConfirmed&&h.Inertia.post(route("order.sent_to_kitchen"),{data:{carts:d.carts,table_id:d.table_id}},{preserveScroll:!0})})},O=m(()=>{let e=!0;return d.carts.forEach(o=>{o.is_sent_to_kitchen==!1&&(e=!1)}),e}),R=m(()=>{let e=!0;return d.carts.forEach(o=>{o.is_done==!1&&(e=!1)}),e});return(e,o)=>(n(),c(N,null,[t("div",K,[Q,t("p",W,[l(' From Table "'),t("span",null,i(d.table_id),1),l('" ')]),y.carts.length>0?(n(),c("div",X,[t("div",Z,[(n(!0),c(N,null,Y(d.carts,s=>(n(),c("div",tt,[s.food_detail.photo?(n(),c("img",{key:0,src:"storage/images/foods/"+s.food_detail.photo,alt:"",class:"rounded-md"},null,8,et)):(n(),c("img",st)),t("div",ot,[t("p",nt,i(s.name),1),t("div",lt,[t("p",it," IDR "+i(Number(s.sub_total).toLocaleString()),1),t("div",at,[s.is_sent_to_kitchen==0?(n(),u(x,{key:0,class:"py-1 px-2",onClick:b=>C(s)},{default:a(()=>[l("+")]),_:2},1032,["onClick"])):(n(),u(x,{key:1,class:"py-1 px-2",onClick:b=>C(s),disabled:""},{default:a(()=>[l("+")]),_:2},1032,["onClick"])),t("span",null,i(s.quantity),1),s.is_sent_to_kitchen==0?(n(),u(x,{key:2,class:"py-1 px-2",onClick:b=>D(s)},{default:a(()=>[l("-")]),_:2},1032,["onClick"])):(n(),u(x,{key:3,class:"py-1 px-2",onClick:b=>D(s),disabled:""},{default:a(()=>[l("-")]),_:2},1032,["onClick"]))])]),t("div",{class:"mt-3",onClick:b=>V(s)},[t("p",ct,[l(" Note: "),t("span",_t,i(s.notes),1)]),t("p",rt,[l(" Disc: "),t("span",ut,i(s.discount)+" %",1)])],8,dt),t("div",mt,[s.is_sent_to_kitchen==0?(n(),c("p",ft,xt)):s.is_done==1?(n(),c("p",bt,[kt,t("span",vt,i(r(v)(s.time_done).format("HH:mm")),1)])):s.is_processed==1?(n(),c("p",yt,[gt,t("span",wt,i(r(v)(s.time_processed).format("HH:mm")),1)])):s.is_sent_to_kitchen==1?(n(),c("p",Ct,[Dt,t("span",St,i(r(v)(s.time_sent_to_kitchen).format("HH:mm")),1)])):U("",!0)]),Nt])]))),128))]),t("div",$t,[t("div",Bt,[It,t("p",jt," IDR "+i(Number(r(T)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Tt,[qt,t("p",Ft," IDR "+i(Number(r(F)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Lt,[Vt,t("p",Et," IDR "+i(Number(r(k)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Ht,[Ot,t("p",Rt," IDR "+i(Number(r(g)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),At,t("div",Yt,[Ut,t("p",Mt," IDR "+i(Number(r(w)).toLocaleString(void 0,{maximumFractionDigits:0})),1)])]),t("div",null,[r(O)?(n(),u(B,{key:0,disabled:"",class:"w-full mt-8"},{default:a(()=>[l("Send to kitchen ")]),_:1})):(n(),u(B,{key:1,class:"w-full mt-8",onClick:H},{default:a(()=>[l("Send to kitchen ")]),_:1}))]),t("div",null,[d.carts.length>0&&r(R)?(n(),u(I,{key:0,class:"w-full mt-8",onClick:L},{default:a(()=>[l("Checkout Now ")]),_:1})):(n(),u(I,{key:1,disabled:"",class:"w-full mt-8"},{default:a(()=>[l("Checkout Now ")]),_:1}))])])):(n(),c("div",zt,Pt))]),p(P,{show:f.value,onClose:o[3]||(o[3]=s=>f.value=!1)},{title:a(()=>[Gt]),content:a(()=>[p(j,{for:"notes",value:"Notes"}),M(t("textarea",{"onUpdate:modelValue":o[0]||(o[0]=s=>_.notes=s),class:"w-full border border-slate-300 rounded-md p-2",rows:"3"},null,512),[[z,_.notes]]),p(j,{for:"notes",value:"Discount (%)",class:"mt-3"}),p(G,{modelValue:_.discount,"onUpdate:modelValue":o[1]||(o[1]=s=>_.discount=s),type:"number",class:"w-full border border-slate-300 rounded-md p-2"},null,8,["modelValue"])]),footer:a(()=>[t("div",Kt,[p(J,{onClick:E},{default:a(()=>[l("Update")]),_:1}),p(x,{onClick:o[2]||(o[2]=s=>f.value=!f.value)},{default:a(()=>[l(" Back ")]),_:1})])]),_:1},8,["show"])],64))}};export{ne as default};

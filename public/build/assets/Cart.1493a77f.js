import{d as D,I as R,k as f,o as n,e as d,a as t,g as i,t as l,F as S,i as A,h as _,c as h,w as c,b as u,X as N,z as p,f as Y,x as U,J as M}from"./app.519b2f6a.js";import{d as b}from"./dayjs.min.4b436a57.js";import{a as B,_ as I}from"./CheckoutButton.af6531b3.js";import{_ as v}from"./DangerButton.fc0fe775.js";import{_ as z}from"./PrimaryButton.f4f101b7.js";import{a as J}from"./DialogModal.8cf5c355.js";import{_ as $}from"./InputLabel.8768c12c.js";import{_ as P}from"./TextInput.9678d8a1.js";const X={class:"px-3"},G=t("p",{class:"text-2xl font-bold"},"Current Order",-1),K={class:"text-xl text-slate-500 font-semibold"},Q={key:0},W={class:"mt-8"},Z={class:"grid grid-cols-4 gap-4 mt-4",key:"data.id"},tt=["src"],et={key:1,src:"https://via.placeholder.com/200x200",alt:""},st={class:"flex flex-col col-span-3"},ot={class:"font-bold text-lg leading-6 flex-1"},nt={class:"flex justify-between items-center mt-5"},lt={class:"text-orange-600 font-bold"},it={class:"flex gap-3"},at=["onClick"],dt={class:"text-sm cursor-pointer"},ct={class:"text-slate-600"},rt={class:"text-sm cursor-pointer"},_t={class:"text-slate-600"},ut={class:"mt-3"},mt={key:0,class:"text-sm text-red-500 font-bold"},ft=t("span",null," Not sent to kitchen yet",-1),pt=t("span",null,null,-1),ht=[ft,pt],xt={key:1,class:"text-sm text-green-600 font-bold"},bt=t("span",null,"Order is done at ",-1),vt={class:"font-normal"},kt={key:2,class:"text-sm text-green-600 font-bold"},gt=t("span",null,"Processed at ",-1),yt={class:"font-normal"},wt={key:3,class:"text-sm text-green-600 font-bold"},Ct=t("span",null,"Sent to kitchen at ",-1),Dt={class:"font-normal"},St=t("div",{class:"border-b bg-slate-100 mt-4"},null,-1),Nt={class:"mt-8 py-6 bg-slate-200 rounded-lg text-slate-500"},Bt={class:"flex justify-between"},It=t("p",{class:"px-6"},"Sub Total",-1),$t={class:"px-6 font-bold"},jt={class:"flex justify-between mt-3"},Tt=t("p",{class:"px-6"},"Total Discount",-1),qt={class:"px-6 font-bold"},Ft={class:"flex justify-between mt-3"},Lt=t("p",{class:"px-6"},"After Disc",-1),Vt={class:"px-6 font-bold"},Et={class:"flex justify-between mt-3"},Ht=t("p",{class:"px-6"},"Tax 10%",-1),Ot={class:"px-6 font-bold"},Rt=t("div",{class:"flex justify-between my-4"},[t("div",{class:"bg-white rounded-full w-6 h-6 -ml-3"}),t("div",{class:"flex-1"}),t("div",{class:"bg-white rounded-full w-6 h-6 -mr-3"})],-1),At={class:"flex justify-between mt-3"},Yt=t("p",{class:"px-6 font-bold text-lg text-slate-700"},"TOTAL",-1),Ut={class:"px-6 font-bold text-lg text-slate-700"},Mt={key:1,class:"mt-16"},zt=t("img",{src:"/img/no-order.svg",alt:""},null,-1),Jt=[zt],Pt=t("div",{class:"font-semibold"},"Add / Edit Note",-1),Xt={class:"flex justify-end gap-3"},oe={__name:"Cart",props:{carts:{type:Object},table_id:{type:String}},setup(k){const a=k,m=D(!1),r=R({id:"",notes:"",discount:""}),j=f(()=>{let e=0;return a.carts.forEach(o=>{e+=o.food_detail.price*o.quantity}),e}),x=f(()=>{let e=0;return a.carts.forEach(o=>{e+=o.food_detail.price*o.quantity*(100-o.discount)/100}),e}),T=D(.1),g=f(()=>x.value*T.value),q=f(()=>{let e=0;return a.carts.forEach(o=>{e+=o.food_detail.price*o.quantity*o.discount/100}),e}),y=f(()=>x.value+g.value),F=()=>{N.fire({title:"Are you sure?",text:"You will checkout all items",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, checkout all items!"}).then(e=>{e.isConfirmed&&p.Inertia.post(route("order.checkout"),{data:{carts:a.carts,table_id:a.table_id,total:y.value}},{preserveScroll:!0})})},L=e=>{p.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity+1}},{preserveScroll:!0})},V=e=>{p.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity-1}},{preserveScroll:!0})},E=e=>{m.value=!0,r.notes=e.notes,r.id=e.id,r.discount=e.discount},H=()=>{p.Inertia.post(route("order.note"),{data:{id:r.id,notes:r.notes,discount:r.discount}},{preserveScroll:!0}),m.value=!1},O=()=>{N.fire({title:"Are you sure?",text:"You will sent all items to kitchen",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, sent all items to kitchen!"}).then(e=>{e.isConfirmed&&p.Inertia.post(route("order.sent_to_kitchen"),{data:{carts:a.carts,table_id:a.table_id}},{preserveScroll:!0})})},w=f(()=>{let e=!0;return a.carts.forEach(o=>{o.is_sent_to_kitchen==!1&&(e=!1)}),e});return(e,o)=>(n(),d(S,null,[t("div",X,[G,t("p",K,[i(' From Table "'),t("span",null,l(a.table_id),1),i('" ')]),k.carts.length>0?(n(),d("div",Q,[t("div",W,[(n(!0),d(S,null,A(a.carts,s=>(n(),d("div",Z,[s.food_detail.photo?(n(),d("img",{key:0,src:"storage/images/foods/"+s.food_detail.photo,alt:"",class:"rounded-md"},null,8,tt)):(n(),d("img",et)),t("div",st,[t("p",ot,l(s.name),1),t("div",nt,[t("p",lt," IDR "+l(Number(s.sub_total).toLocaleString()),1),t("div",it,[u(v,{class:"py-1 px-2",onClick:C=>L(s)},{default:c(()=>[i("+")]),_:2},1032,["onClick"]),t("span",null,l(s.quantity),1),u(v,{class:"py-1 px-2",onClick:C=>V(s)},{default:c(()=>[i("-")]),_:2},1032,["onClick"])])]),t("div",{class:"mt-3",onClick:C=>E(s)},[t("p",dt,[i(" Note: "),t("span",ct,l(s.notes),1)]),t("p",rt,[i(" Disc: "),t("span",_t,l(s.discount)+" %",1)])],8,at),t("div",ut,[s.is_sent_to_kitchen==0?(n(),d("p",mt,ht)):s.is_done==1?(n(),d("p",xt,[bt,t("span",vt,l(_(b)(s.time_done).format("HH:mm")),1)])):s.is_processed==1?(n(),d("p",kt,[gt,t("span",yt,l(_(b)(s.time_processed).format("HH:mm")),1)])):s.is_sent_to_kitchen==1?(n(),d("p",wt,[Ct,t("span",Dt,l(_(b)(s.time_sent_to_kitchen).format("HH:mm")),1)])):Y("",!0)]),St])]))),128))]),t("div",Nt,[t("div",Bt,[It,t("p",$t," IDR "+l(Number(_(j)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",jt,[Tt,t("p",qt," IDR "+l(Number(_(q)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Ft,[Lt,t("p",Vt," IDR "+l(Number(_(x)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Et,[Ht,t("p",Ot," IDR "+l(Number(_(g)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),Rt,t("div",At,[Yt,t("p",Ut," IDR "+l(Number(_(y)).toLocaleString(void 0,{maximumFractionDigits:0})),1)])]),t("div",null,[_(w)?(n(),h(B,{key:0,disabled:"",class:"w-full mt-8"},{default:c(()=>[i("Send to kitchen ")]),_:1})):(n(),h(B,{key:1,class:"w-full mt-8",onClick:O},{default:c(()=>[i("Send to kitchen ")]),_:1}))]),t("div",null,[a.carts.length>0&&_(w)?(n(),h(I,{key:0,class:"w-full mt-8",onClick:F},{default:c(()=>[i("Checkout Now ")]),_:1})):(n(),h(I,{key:1,disabled:"",class:"w-full mt-8"},{default:c(()=>[i("Checkout Now ")]),_:1}))])])):(n(),d("div",Mt,Jt))]),u(J,{show:m.value,onClose:o[3]||(o[3]=s=>m.value=!1)},{title:c(()=>[Pt]),content:c(()=>[u($,{for:"notes",value:"Notes"}),U(t("textarea",{"onUpdate:modelValue":o[0]||(o[0]=s=>r.notes=s),class:"w-full border border-slate-300 rounded-md p-2",rows:"3"},null,512),[[M,r.notes]]),u($,{for:"notes",value:"Discount (%)",class:"mt-3"}),u(P,{modelValue:r.discount,"onUpdate:modelValue":o[1]||(o[1]=s=>r.discount=s),type:"number",class:"w-full border border-slate-300 rounded-md p-2"},null,8,["modelValue"])]),footer:c(()=>[t("div",Xt,[u(z,{onClick:H},{default:c(()=>[i("Update")]),_:1}),u(v,{onClick:o[2]||(o[2]=s=>m.value=!m.value)},{default:c(()=>[i(" Back ")]),_:1})])]),_:1},8,["show"])],64))}};export{oe as default};

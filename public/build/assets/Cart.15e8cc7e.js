import{o as d,e as u,r as V,d as k,I as R,k as f,a as t,g as a,t as n,F as w,i as E,h as m,c as C,w as c,b as r,W as D,z as h,x as O,J as A}from"./app.ca1f34a1.js";import{_ as b}from"./DangerButton.235d971c.js";import{_ as U}from"./PrimaryButton.94f55c77.js";import{a as M}from"./DialogModal.0d89c128.js";import{_ as S}from"./InputLabel.8dab08d9.js";import{_ as Y}from"./TextInput.30c6dfaf.js";const z=["type"],N={__name:"CheckoutButton",props:{type:{type:String,default:"button"}},setup(p){return(l,_)=>(d(),u("button",{type:p.type,class:"inline-flex items-center justify-center px-4 py-4 bg-orange-600 border border-transparent rounded-md font-semibold text-white uppercase tracking-widest hover:bg-orange-500 focus:outline-none focus:border-orange-700 focus:ring focus:ring-orange-200 active:bg-orange-600 disabled:opacity-25 transition"},[V(l.$slots,"default")],8,z))}};const J={class:"px-3"},W=t("p",{class:"text-2xl font-bold"},"Current Order",-1),G={class:"text-xl text-slate-500 font-semibold"},H={key:0},K={class:"mt-8"},P={class:"grid grid-cols-4 gap-4 mt-4",key:"data.id"},Q=["src"],X={key:1,src:"https://via.placeholder.com/200x200",alt:""},Z={class:"flex flex-col col-span-3"},tt={class:"font-bold text-lg leading-6 flex-1"},et={class:"flex justify-between items-center mt-5"},st={class:"text-orange-600 font-bold"},ot={class:"flex gap-3"},nt=["onClick"],lt={class:"text-sm cursor-pointer"},it={class:"text-slate-600"},at={class:"text-sm cursor-pointer"},dt={class:"text-slate-600"},ct=t("div",{class:"border-b bg-slate-100 mt-4"},null,-1),rt={class:"mt-8 py-6 bg-slate-200 rounded-lg text-slate-500"},ut={class:"flex justify-between"},_t=t("p",{class:"px-6"},"Sub Total",-1),ft={class:"px-6 font-bold"},mt={class:"flex justify-between mt-3"},pt=t("p",{class:"px-6"},"Total Discount",-1),ht={class:"px-6 font-bold"},xt={class:"flex justify-between mt-3"},bt=t("p",{class:"px-6"},"After Disc",-1),gt={class:"px-6 font-bold"},vt={class:"flex justify-between mt-3"},yt=t("p",{class:"px-6"},"Tax 10%",-1),kt={class:"px-6 font-bold"},wt=t("div",{class:"flex justify-between my-4"},[t("div",{class:"bg-white rounded-full w-6 h-6 -ml-3"}),t("div",{class:"flex-1"}),t("div",{class:"bg-white rounded-full w-6 h-6 -mr-3"})],-1),Ct={class:"flex justify-between mt-3"},Dt=t("p",{class:"px-6 font-bold text-lg text-slate-700"},"TOTAL",-1),St={class:"px-6 font-bold text-lg text-slate-700"},Nt={key:1,class:"mt-16"},$t=t("img",{src:"/img/no-order.svg",alt:""},null,-1),It=[$t],jt=t("div",{class:"font-semibold"},"Add / Edit Note",-1),Bt={class:"flex justify-end gap-3"},Et={__name:"Cart",props:{carts:{type:Object},table_id:{type:String}},setup(p){const l=p,_=k(!1),i=R({id:"",notes:"",discount:""}),$=f(()=>{let e=0;return l.carts.forEach(s=>{e+=s.food_detail.price*s.quantity}),e}),x=f(()=>{let e=0;return l.carts.forEach(s=>{e+=s.food_detail.price*s.quantity*(100-s.discount)/100}),e}),I=k(.1),g=f(()=>x.value*I.value),j=f(()=>{let e=0;return l.carts.forEach(s=>{e+=s.food_detail.price*s.quantity*s.discount/100}),e}),v=f(()=>x.value+g.value),B=()=>{D.fire({title:"Are you sure?",text:"You will checkout all items",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, checkout all items!"}).then(e=>{e.isConfirmed&&(h.Inertia.post(route("order.checkout"),{data:{carts:l.carts,table_id:l.table_id,total:v.value}},{preserveScroll:!0}),D.fire("Checkout!","Checkout succesfully.","success"))})},T=e=>{h.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity+1}},{preserveScroll:!0})},q=e=>{h.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity-1}},{preserveScroll:!0})},F=e=>{_.value=!0,i.notes=e.notes,i.id=e.id,i.discount=e.discount},L=()=>{h.Inertia.post(route("order.note"),{data:{id:i.id,notes:i.notes,discount:i.discount}},{preserveScroll:!0}),_.value=!1};return(e,s)=>(d(),u(w,null,[t("div",J,[W,t("p",G,[a(' From Table "'),t("span",null,n(l.table_id),1),a('" ')]),p.carts.length>0?(d(),u("div",H,[t("div",K,[(d(!0),u(w,null,E(l.carts,o=>(d(),u("div",P,[o.food_detail.photo?(d(),u("img",{key:0,src:"storage/images/foods/"+o.food_detail.photo,alt:"",class:"rounded-md"},null,8,Q)):(d(),u("img",X)),t("div",Z,[t("p",tt,n(o.name),1),t("div",et,[t("p",st," IDR "+n(Number(o.sub_total).toLocaleString()),1),t("div",ot,[r(b,{class:"py-1 px-2",onClick:y=>T(o)},{default:c(()=>[a("+")]),_:2},1032,["onClick"]),t("span",null,n(o.quantity),1),r(b,{class:"py-1 px-2",onClick:y=>q(o)},{default:c(()=>[a("-")]),_:2},1032,["onClick"])])]),t("div",{class:"mt-3",onClick:y=>F(o)},[t("p",lt,[a(" Note: "),t("span",it,n(o.notes),1)]),t("p",at,[a(" Disc: "),t("span",dt,n(o.discount)+" %",1)])],8,nt),ct])]))),128))]),t("div",rt,[t("div",ut,[_t,t("p",ft," IDR "+n(Number(m($)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",mt,[pt,t("p",ht," IDR "+n(Number(m(j)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",xt,[bt,t("p",gt," IDR "+n(Number(m(x)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",vt,[yt,t("p",kt," IDR "+n(Number(m(g)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),wt,t("div",Ct,[Dt,t("p",St," IDR "+n(Number(m(v)).toLocaleString(void 0,{maximumFractionDigits:0})),1)])]),t("div",null,[l.carts.length>0?(d(),C(N,{key:0,class:"w-full mt-8",onClick:B},{default:c(()=>[a("Checkout Now ")]),_:1})):(d(),C(N,{key:1,disabled:"",class:"w-full mt-8"},{default:c(()=>[a("Checkout Now ")]),_:1}))])])):(d(),u("div",Nt,It))]),r(M,{show:_.value,onClose:s[3]||(s[3]=o=>_.value=!1)},{title:c(()=>[jt]),content:c(()=>[r(S,{for:"notes",value:"Notes"}),O(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=o=>i.notes=o),class:"w-full border border-slate-300 rounded-md p-2",rows:"3"},null,512),[[A,i.notes]]),r(S,{for:"notes",value:"Discount (%)",class:"mt-3"}),r(Y,{modelValue:i.discount,"onUpdate:modelValue":s[1]||(s[1]=o=>i.discount=o),type:"number",class:"w-full border border-slate-300 rounded-md p-2"},null,8,["modelValue"])]),footer:c(()=>[t("div",Bt,[r(U,{onClick:L},{default:c(()=>[a("Update")]),_:1}),r(b,{onClick:s[2]||(s[2]=o=>_.value=!_.value)},{default:c(()=>[a(" Back ")]),_:1})])]),_:1},8,["show"])],64))}};export{Et as default};

import{X as $,I as v,m as x,Y as O,z as f,d as S,q as j,V as w,o as g,c as C,w as q,a,t as _,g as B,h as E,b as m,e as y,i as P,n as R,F as V}from"./app.d3c25bc6.js";import{_ as I}from"./AppLayout.5674f844.js";import U from"./Order.2137dd12.js";import Z from"./Cart.d7d4852c.js";import{_ as k}from"./Textinput.753afa15.js";import{d as N}from"./dayjs.min.b0a58a8b.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./CheckoutButton.64199d4f.js";import"./DangerButton.381c5437.js";import"./PrimaryButton.94c3ae72.js";import"./DialogModal.30389099.js";import"./InputLabel.2de71d4b.js";import"./TextInput.27fe91e8.js";class b{constructor(e,t,s){var r,i;this.name=e,this.definition=t,this.bindings=(r=t.bindings)!=null?r:{},this.wheres=(i=t.wheres)!=null?i:{},this.config=s}get template(){return`${this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}/${this.definition.uri}`.replace(/\/+$/,"")}get parameterSegments(){var e,t;return(t=(e=this.template.match(/{[^}?]+\??}/g))==null?void 0:e.map(s=>({name:s.replace(/{|\??}/g,""),required:!/\?}$/.test(s)})))!=null?t:[]}matchesUrl(e){if(!this.definition.methods.includes("GET"))return!1;const t=this.template.replace(/(\/?){([^}?]*)(\??)}/g,(o,n,c,l)=>{var h;const d=`(?<${c}>${((h=this.wheres[c])==null?void 0:h.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return l?`(${n}${d})?`:`${n}${d}`}).replace(/^\w+:\/\//,""),[s,r]=e.replace(/^\w+:\/\//,"").split("?"),i=new RegExp(`^${t}/?$`).exec(s);return i?{params:i.groups,query:$.parse(r)}:!1}compile(e){const t=this.parameterSegments;return t.length?this.template.replace(/{([^}?]+)(\??)}/g,(s,r,i)=>{var o,n,c;if(!i&&[null,void 0].includes(e[r]))throw new Error(`Ziggy error: '${r}' parameter is required for route '${this.name}'.`);if(t[t.length-1].name===r&&this.wheres[r]===".*")return encodeURIComponent((o=e[r])!=null?o:"").replace(/%2F/g,"/");if(this.wheres[r]&&!new RegExp(`^${i?`(${this.wheres[r]})?`:this.wheres[r]}$`).test((n=e[r])!=null?n:""))throw new Error(`Ziggy error: '${r}' parameter does not match required format '${this.wheres[r]}' for route '${this.name}'.`);return encodeURIComponent((c=e[r])!=null?c:"")}).replace(/\/+$/,""):this.template}}class F extends String{constructor(e,t,s=!0,r){if(super(),this._config=r!=null?r:typeof Ziggy<"u"?Ziggy:globalThis==null?void 0:globalThis.Ziggy,this._config={...this._config,absolute:s},e){if(!this._config.routes[e])throw new Error(`Ziggy error: route '${e}' is not in the route list.`);this._route=new b(e,this._config.routes[e],this._config),this._params=this._parse(t)}}toString(){const e=Object.keys(this._params).filter(t=>!this._route.parameterSegments.some(({name:s})=>s===t)).filter(t=>t!=="_query").reduce((t,s)=>({...t,[s]:this._params[s]}),{});return this._route.compile(this._params)+$.stringify({...e,...this._params._query},{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(t,s)=>typeof t=="boolean"?Number(t):s(t)})}_unresolve(e){e?this._config.absolute&&e.startsWith("/")&&(e=this._location().host+e):e=this._currentUrl();let t={};const[s,r]=Object.entries(this._config.routes).find(([i,o])=>t=new b(i,o,this._config).matchesUrl(e))||[void 0,void 0];return{name:s,...t,route:r}}_currentUrl(){const{host:e,pathname:t,search:s}=this._location();return(this._config.absolute?e+t:t.replace(this._config.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+s}current(e,t){const{name:s,params:r,query:i,route:o}=this._unresolve();if(!e)return s;const n=new RegExp(`^${e.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(s);if([null,void 0].includes(t)||!n)return n;const c=new b(s,o,this._config);t=this._parse(t,c);const l={...r,...i};return Object.values(t).every(d=>!d)&&!Object.values(l).some(d=>d!==void 0)?!0:Object.entries(t).every(([d,h])=>l[d]==h)}_location(){var r,i,o,n,c,l;const{host:e="",pathname:t="",search:s=""}=typeof window<"u"?window.location:{};return{host:(i=(r=this._config.location)==null?void 0:r.host)!=null?i:e,pathname:(n=(o=this._config.location)==null?void 0:o.pathname)!=null?n:t,search:(l=(c=this._config.location)==null?void 0:c.search)!=null?l:s}}get params(){const{params:e,query:t}=this._unresolve();return{...e,...t}}has(e){return Object.keys(this._config.routes).includes(e)}_parse(e={},t=this._route){e!=null||(e={}),e=["string","number"].includes(typeof e)?[e]:e;const s=t.parameterSegments.filter(({name:r})=>!this._config.defaults[r]);return Array.isArray(e)?e=e.reduce((r,i,o)=>s[o]?{...r,[s[o].name]:i}:typeof i=="object"?{...r,...i}:{...r,[i]:""},{}):s.length===1&&!e[s[0].name]&&(e.hasOwnProperty(Object.values(t.bindings)[0])||e.hasOwnProperty("id"))&&(e={[s[0].name]:e}),{...this._defaults(t),...this._substituteBindings(e,t)}}_defaults(e){return e.parameterSegments.filter(({name:t})=>this._config.defaults[t]).reduce((t,{name:s},r)=>({...t,[s]:this._config.defaults[s]}),{})}_substituteBindings(e,{bindings:t,parameterSegments:s}){return Object.entries(e).reduce((r,[i,o])=>{if(!o||typeof o!="object"||Array.isArray(o)||!s.some(({name:n})=>n===i))return{...r,[i]:o};if(!o.hasOwnProperty(t[i]))if(o.hasOwnProperty("id"))t[i]="id";else throw new Error(`Ziggy error: object passed as '${i}' parameter is missing route model binding key '${t[i]}'.`);return{...r,[i]:o[t[i]]}},{})}valueOf(){return this.toString()}check(e){return this.has(e)}}function p(u,e,t,s){const r=new F(u,e,t,s);return u?r.toString():r}const M={class:"grid grid-cols-12 relative"},T={class:"py-12 bg-slate-100 xl:col-span-8 lg:col-span-7 overflow-y-auto h-screen"},Y={class:"max-w-full mx-auto sm:px-6 lg:px-8"},A={class:"flex justify-between gap-6"},D={class:"text-2xl font-bold"},z={class:"text-slate-500 text-sm mt-2"},L={class:"font-semibold"},G={class:"grid xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 gap-8 lg:gap-3 mt-12"},H=["value","onClick"],Q={class:"overflow-hidden"},W={class:"px-4 py-12 xl:col-span-4 lg:col-span-5 overflow-y-auto h-screen"},de={__name:"Order",props:{foods:{type:Object},categories:{type:Object},carts:{type:Object},table_id:{type:String}},setup(u){const e=u,t=v({search:"",category:""});x(t,i=>{f.Inertia.get(p("order"),{filters:i},{preserveState:!0,preserveScroll:!0,replace:!0})});const s=()=>{t.search="",t.category=""};e.table_id==null&&O.fire({title:"Error",text:"No table number found!",icon:"error",allowOutsideClick:!1,showCancelButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Choose table!"}).then(i=>{i.isConfirmed&&f.Inertia.visit(p("table"))});const r=S(e.table_id);return j(()=>{new w("ff94d45ed44d71633a8d",{cluster:"ap1"}).subscribe("order-processed").bind("OrderProcessed",function(l){f.Inertia.get(p("order"),{table_id:r.value},{preserveState:!0,preserveScroll:!0,replace:!0})}),new w("ff94d45ed44d71633a8d",{cluster:"ap1"}).subscribe("order-done").bind("OrderDone",function(l){f.Inertia.get(p("order"),{table_id:r.value},{preserveState:!0,preserveScroll:!0,replace:!0})})}),(i,o)=>(g(),C(I,{title:"Order List"},{default:q(()=>[a("div",M,[a("div",T,[a("div",Y,[a("div",A,[a("div",null,[a("p",D," Hi, "+_(i.$page.props.user.name),1),a("p",z,[B(" Today is "),a("span",L,_(E(N)().format("dddd, D MMMM YYYY")),1)])]),a("div",null,[m(k,{type:"text",placeholder:"Search here..",class:"w-64",modelValue:t.search,"onUpdate:modelValue":o[0]||(o[0]=n=>t.search=n)},null,8,["modelValue"])])]),a("div",G,[(g(!0),y(V,null,P(e.categories,n=>(g(),y("div",null,[a("button",{value:n.name,class:R(["bg-white border border-slate-300 shadow-md rounded-lg py-2 px-8 flex justify-evenly items-center gap-4 cursor-pointer hover:bg-orange-600 hover:text-white hover:font-bold transition w-full uppercase tracking-wider",{"bg-orange-600 text-white":t.category==n.id}]),onClick:c=>t.category=n.id},_(n.name),11,H)]))),256))]),a("div",{class:"mt-6"},[a("p",{class:"text-sm text-slate-500 hover:text-slate-800 hover:underline cursor-pointer",onClick:s}," Reset Filter ")]),a("div",Q,[m(U,{foods:e.foods,categories:u.categories,filter:t.category,table_id:e.table_id},null,8,["foods","categories","filter","table_id"])])])]),a("div",W,[m(Z,{carts:e.carts,table_id:e.table_id},null,8,["carts","table_id"])])])]),_:1}))}};export{de as default};

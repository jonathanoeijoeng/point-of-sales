import{d as S,I as U,k as m,o as n,e as a,a as t,g as l,t as i,F as $,i as M,h as r,c as u,w as c,b as p,Y as B,z as x,f as z,x as I,J as j}from"./app.c1285ba1.js";import{d as v}from"./dayjs.min.01df7c13.js";import{a as T,_ as V}from"./CheckoutButton.bdb4f4a9.js";import{_ as k}from"./DangerButton.f1383d9f.js";import{_ as J}from"./PrimaryButton.9604f039.js";import{a as P}from"./DialogModal.73380a69.js";import{_ as q}from"./InputLabel.3c51360d.js";import{_ as G}from"./TextInput.cf6d57af.js";const K={class:"px-3"},Q=t("p",{class:"text-2xl font-bold"},"Current Order",-1),W={class:"text-xl text-slate-500 font-semibold"},X={key:0},Z={class:"mt-8"},tt=["src"],et={key:1,src:"https://via.placeholder.com/200x200",alt:""},st={class:"flex flex-col col-span-3"},ot={class:"font-bold text-lg leading-6"},nt={class:"flex justify-between items-center mt-1"},lt={class:"text-orange-600 font-bold"},it={class:"flex gap-3"},at=["onClick"],dt={class:"text-sm cursor-pointer"},ct={class:"text-slate-600"},_t={class:"text-sm cursor-pointer"},rt={class:"text-slate-600"},ut={key:1,class:"mt-3"},mt={class:"text-sm"},ft={class:"text-slate-400"},pt=["onClick"],ht={class:"text-slate-600"},xt={class:"mt-3"},kt={key:0,class:"text-sm text-red-500 font-bold"},bt=t("span",null," Not sent to kitchen yet",-1),vt=t("span",null,null,-1),yt=[bt,vt],gt={key:1,class:"text-sm text-green-600 font-bold"},wt=t("span",null,"Order is done at ",-1),Ct={class:"font-normal"},Dt={key:2,class:"text-sm text-green-600 font-bold"},Nt=t("span",null,"Processed at ",-1),St={class:"font-normal"},$t={key:3,class:"text-sm text-green-600 font-bold"},Bt=t("span",null,"Sent to kitchen at ",-1),It={class:"font-normal"},jt=t("div",{class:"border-b bg-slate-100 mt-4"},null,-1),Tt={class:"mt-8 py-6 bg-slate-200 rounded-lg text-slate-500"},Vt={class:"flex justify-between"},qt=t("p",{class:"px-6"},"Sub Total",-1),Ft={class:"px-6 font-bold"},Lt={class:"flex justify-between mt-3"},Et=t("p",{class:"px-6"},"Total Discount",-1),Ht={class:"px-6 font-bold"},Ot={class:"flex justify-between mt-3"},Rt=t("p",{class:"px-6"},"After Disc",-1),At={class:"px-6 font-bold"},Yt={class:"flex justify-between mt-3"},Ut=t("p",{class:"px-6"},"Tax 10%",-1),Mt={class:"px-6 font-bold"},zt=t("div",{class:"flex justify-between my-4"},[t("div",{class:"bg-white rounded-full w-6 h-6 -ml-3"}),t("div",{class:"flex-1"}),t("div",{class:"bg-white rounded-full w-6 h-6 -mr-3"})],-1),Jt={class:"flex justify-between mt-3"},Pt=t("p",{class:"px-6 font-bold text-lg text-slate-700"},"TOTAL",-1),Gt={class:"px-6 font-bold text-lg text-slate-700"},Kt={key:1,class:"mt-16"},Qt=t("img",{src:"/img/no-order.svg",alt:""},null,-1),Wt=[Qt],Xt=t("div",{class:"font-semibold"},"Add / Edit Note",-1),Zt={class:"flex justify-end gap-3"},de={__name:"Cart",props:{carts:{type:Object},table_id:{type:String}},setup(y){const _=y,f=S(!1),d=U({id:"",notes:"",discount:""}),F=m(()=>{let s=0;return _.carts.forEach(o=>{s+=o.food_detail.price*o.quantity}),s}),b=m(()=>{let s=0;return _.carts.forEach(o=>{s+=o.food_detail.price*o.quantity*(100-o.discount)/100}),s}),L=S(.1),g=m(()=>b.value*L.value),E=m(()=>{let s=0;return _.carts.forEach(o=>{s+=o.food_detail.price*o.quantity*o.discount/100}),s}),w=m(()=>b.value+g.value),H=()=>{B.fire({title:"Are you sure?",text:"You will checkout all items",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, checkout all items!"}).then(s=>{s.isConfirmed&&x.Inertia.post(route("order.checkout"),{data:{carts:_.carts,table_id:_.table_id,total:w.value}},{preserveScroll:!0})})},C=s=>{x.Inertia.post(route("order.change"),{data:{id:s.id,quantity:s.quantity+1}},{preserveScroll:!0})},D=s=>{x.Inertia.post(route("order.change"),{data:{id:s.id,quantity:s.quantity-1}},{preserveScroll:!0})},N=s=>{f.value=!0,d.notes=s.notes,d.id=s.id,d.discount=s.discount,d.check=s.is_sent_to_kitchen},O=()=>{x.Inertia.post(route("order.note"),{data:{id:d.id,notes:d.notes,discount:d.discount}},{preserveScroll:!0}),f.value=!1},R=()=>{B.fire({title:"Are you sure?",text:"You will sent all items to kitchen",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, sent all items to kitchen!"}).then(s=>{s.isConfirmed&&x.Inertia.post(route("order.sent_to_kitchen"),{data:{carts:_.carts,table_id:_.table_id}},{preserveScroll:!0})})},A=m(()=>{let s=!0;return _.carts.forEach(o=>{o.is_sent_to_kitchen==!1&&(s=!1)}),s}),Y=m(()=>{let s=!0;return _.carts.forEach(o=>{o.is_done==!1&&(s=!1)}),s});return(s,o)=>(n(),a($,null,[t("div",K,[Q,t("p",W,[l(' From Table "'),t("span",null,i(_.table_id),1),l('" ')]),y.carts.length>0?(n(),a("div",X,[t("div",Z,[(n(!0),a($,null,M(_.carts,e=>(n(),a("div",{class:"grid grid-cols-4 gap-4 mt-4",key:e.id},[e.food_detail.photo?(n(),a("img",{key:0,src:"storage/images/foods/"+e.food_detail.photo,alt:"",class:"rounded-md"},null,8,tt)):(n(),a("img",et)),t("div",st,[t("div",ot,i(e.food_detail.name),1),t("div",nt,[t("p",lt," IDR "+i(Number(e.sub_total).toLocaleString()),1),t("div",it,[e.is_sent_to_kitchen==0?(n(),u(k,{key:0,class:"py-1 px-2",onClick:h=>C(e)},{default:c(()=>[l("+")]),_:2},1032,["onClick"])):(n(),u(k,{key:1,class:"py-1 px-2",onClick:h=>C(e),disabled:""},{default:c(()=>[l("+")]),_:2},1032,["onClick"])),t("span",null,i(e.quantity),1),e.is_sent_to_kitchen==0?(n(),u(k,{key:2,class:"py-1 px-2",onClick:h=>D(e)},{default:c(()=>[l("-")]),_:2},1032,["onClick"])):(n(),u(k,{key:3,class:"py-1 px-2",onClick:h=>D(e),disabled:""},{default:c(()=>[l("-")]),_:2},1032,["onClick"]))])]),e.is_sent_to_kitchen==0?(n(),a("div",{key:0,class:"mt-3",onClick:h=>N(e)},[t("p",dt,[l(" Note: "),t("span",ct,i(e.notes),1)]),t("p",_t,[l(" Disc: "),t("span",rt,i(e.discount)+" %",1)])],8,at)):(n(),a("div",ut,[t("p",mt,[l(" Note: "),t("span",ft,i(e.notes),1)]),t("p",{class:"text-sm cursor-pointer",onClick:h=>N(e)},[l(" Disc: "),t("span",ht,i(e.discount)+" %",1)],8,pt)])),t("div",xt,[e.is_sent_to_kitchen==0?(n(),a("p",kt,yt)):e.is_done==1?(n(),a("p",gt,[wt,t("span",Ct,i(r(v)(e.time_done).format("HH:mm")),1)])):e.is_processed==1?(n(),a("p",Dt,[Nt,t("span",St,i(r(v)(e.time_processed).format("HH:mm")),1)])):e.is_sent_to_kitchen==1?(n(),a("p",$t,[Bt,t("span",It,i(r(v)(e.time_sent_to_kitchen).format("HH:mm")),1)])):z("",!0)]),jt])]))),128))]),t("div",Tt,[t("div",Vt,[qt,t("p",Ft," IDR "+i(Number(r(F)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Lt,[Et,t("p",Ht," IDR "+i(Number(r(E)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Ot,[Rt,t("p",At," IDR "+i(Number(r(b)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Yt,[Ut,t("p",Mt," IDR "+i(Number(r(g)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),zt,t("div",Jt,[Pt,t("p",Gt," IDR "+i(Number(r(w)).toLocaleString(void 0,{maximumFractionDigits:0})),1)])]),t("div",null,[r(A)?(n(),u(T,{key:0,disabled:"",class:"w-full mt-8"},{default:c(()=>[l("Send to kitchen ")]),_:1})):(n(),u(T,{key:1,class:"w-full mt-8",onClick:R},{default:c(()=>[l("Send to kitchen ")]),_:1}))]),t("div",null,[_.carts.length>0&&r(Y)?(n(),u(V,{key:0,class:"w-full mt-8",onClick:H},{default:c(()=>[l("Checkout Now ")]),_:1})):(n(),u(V,{key:1,disabled:"",class:"w-full mt-8"},{default:c(()=>[l("Checkout Now ")]),_:1}))])])):(n(),a("div",Kt,Wt))]),p(P,{show:f.value,onClose:o[4]||(o[4]=e=>f.value=!1)},{title:c(()=>[Xt]),content:c(()=>[p(q,{for:"notes",value:"Notes"}),d.check==0?I((n(),a("textarea",{key:0,"onUpdate:modelValue":o[0]||(o[0]=e=>d.notes=e),class:"w-full border border-slate-300 rounded-md p-2",rows:"3"},null,512)),[[j,d.notes]]):I((n(),a("textarea",{key:1,"onUpdate:modelValue":o[1]||(o[1]=e=>d.notes=e),class:"w-full border border-slate-300 rounded-md p-2 bg-slate-100",rows:"3",disabled:""},null,512)),[[j,d.notes]]),p(q,{for:"notes",value:"Discount (%)",class:"mt-3"}),p(G,{modelValue:d.discount,"onUpdate:modelValue":o[2]||(o[2]=e=>d.discount=e),type:"number",class:"w-full border border-slate-300 rounded-md p-2"},null,8,["modelValue"])]),footer:c(()=>[t("div",Zt,[p(J,{onClick:O},{default:c(()=>[l("Update")]),_:1}),p(k,{onClick:o[3]||(o[3]=e=>f.value=!f.value)},{default:c(()=>[l(" Back ")]),_:1})])]),_:1},8,["show"])],64))}};export{de as default};

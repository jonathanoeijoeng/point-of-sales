import{d as C,I as A,k as m,o as n,e as d,a as t,g as a,t as l,F as D,i as Y,h as _,c as p,w as c,b as u,Y as S,z as h,f as U,x as M,J as z}from"./app.8edb1751.js";import{d as b}from"./dayjs.min.2687ff27.js";import{a as N,_ as B}from"./CheckoutButton.b429fecc.js";import{_ as v}from"./DangerButton.1d9aea62.js";import{_ as J}from"./PrimaryButton.6514b1bc.js";import{a as P}from"./DialogModal.4816dbc6.js";import{_ as I}from"./InputLabel.7fc8d323.js";import{_ as G}from"./TextInput.af4920a5.js";const K={class:"px-3"},Q=t("p",{class:"text-2xl font-bold"},"Current Order",-1),W={class:"text-xl text-slate-500 font-semibold"},X={key:0},Z={class:"mt-8"},tt={class:"grid grid-cols-4 gap-4 mt-4",key:"data.id"},et=["src"],st={key:1,src:"https://via.placeholder.com/200x200",alt:""},ot={class:"flex flex-col col-span-3"},nt={class:"font-bold text-lg leading-6 flex-1"},lt={class:"flex justify-between items-center mt-5"},it={class:"text-orange-600 font-bold"},at={class:"flex gap-3"},dt=["onClick"],ct={class:"text-sm cursor-pointer"},rt={class:"text-slate-600"},_t={class:"text-sm cursor-pointer"},ut={class:"text-slate-600"},mt={class:"mt-3"},ft={key:0,class:"text-sm text-red-500 font-bold"},ht=t("span",null," Not sent to kitchen yet",-1),pt=t("span",null,null,-1),xt=[ht,pt],bt={key:1,class:"text-sm text-green-600 font-bold"},vt=t("span",null,"Order is done at ",-1),kt={class:"font-normal"},gt={key:2,class:"text-sm text-green-600 font-bold"},yt=t("span",null,"Processed at ",-1),wt={class:"font-normal"},Ct={key:3,class:"text-sm text-green-600 font-bold"},Dt=t("span",null,"Sent to kitchen at ",-1),St={class:"font-normal"},Nt=t("div",{class:"border-b bg-slate-100 mt-4"},null,-1),Bt={class:"mt-8 py-6 bg-slate-200 rounded-lg text-slate-500"},It={class:"flex justify-between"},$t=t("p",{class:"px-6"},"Sub Total",-1),jt={class:"px-6 font-bold"},Tt={class:"flex justify-between mt-3"},qt=t("p",{class:"px-6"},"Total Discount",-1),Ft={class:"px-6 font-bold"},Lt={class:"flex justify-between mt-3"},Vt=t("p",{class:"px-6"},"After Disc",-1),Et={class:"px-6 font-bold"},Ht={class:"flex justify-between mt-3"},Ot=t("p",{class:"px-6"},"Tax 10%",-1),Rt={class:"px-6 font-bold"},At=t("div",{class:"flex justify-between my-4"},[t("div",{class:"bg-white rounded-full w-6 h-6 -ml-3"}),t("div",{class:"flex-1"}),t("div",{class:"bg-white rounded-full w-6 h-6 -mr-3"})],-1),Yt={class:"flex justify-between mt-3"},Ut=t("p",{class:"px-6 font-bold text-lg text-slate-700"},"TOTAL",-1),Mt={class:"px-6 font-bold text-lg text-slate-700"},zt={key:1,class:"mt-16"},Jt=t("img",{src:"/img/no-order.svg",alt:""},null,-1),Pt=[Jt],Gt=t("div",{class:"font-semibold"},"Add / Edit Note",-1),Kt={class:"flex justify-end gap-3"},ne={__name:"Cart",props:{carts:{type:Object},table_id:{type:String}},setup(k){const i=k,f=C(!1),r=A({id:"",notes:"",discount:""}),$=m(()=>{let e=0;return i.carts.forEach(s=>{e+=s.food_detail.price*s.quantity}),e}),x=m(()=>{let e=0;return i.carts.forEach(s=>{e+=s.food_detail.price*s.quantity*(100-s.discount)/100}),e}),j=C(.1),g=m(()=>x.value*j.value),T=m(()=>{let e=0;return i.carts.forEach(s=>{e+=s.food_detail.price*s.quantity*s.discount/100}),e}),y=m(()=>x.value+g.value),q=()=>{S.fire({title:"Are you sure?",text:"You will checkout all items",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, checkout all items!"}).then(e=>{e.isConfirmed&&h.Inertia.post(route("order.checkout"),{data:{carts:i.carts,table_id:i.table_id,total:y.value}},{preserveScroll:!0})})},F=e=>{h.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity+1}},{preserveScroll:!0})},L=e=>{h.Inertia.post(route("order.change"),{data:{id:e.id,quantity:e.quantity-1}},{preserveScroll:!0})},V=e=>{f.value=!0,r.notes=e.notes,r.id=e.id,r.discount=e.discount},E=()=>{h.Inertia.post(route("order.note"),{data:{id:r.id,notes:r.notes,discount:r.discount}},{preserveScroll:!0}),f.value=!1},H=()=>{S.fire({title:"Are you sure?",text:"You will sent all items to kitchen",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, sent all items to kitchen!"}).then(e=>{e.isConfirmed&&h.Inertia.post(route("order.sent_to_kitchen"),{data:{carts:i.carts,table_id:i.table_id}},{preserveScroll:!0})})},O=m(()=>{let e=!0;return i.carts.forEach(s=>{s.is_sent_to_kitchen==!1&&(e=!1)}),e}),R=m(()=>{let e=!0;return i.carts.forEach(s=>{s.is_done==!1&&(e=!1)}),e});return(e,s)=>(n(),d(D,null,[t("div",K,[Q,t("p",W,[a(' From Table "'),t("span",null,l(i.table_id),1),a('" ')]),k.carts.length>0?(n(),d("div",X,[t("div",Z,[(n(!0),d(D,null,Y(i.carts,o=>(n(),d("div",tt,[o.food_detail.photo?(n(),d("img",{key:0,src:"storage/images/foods/"+o.food_detail.photo,alt:"",class:"rounded-md"},null,8,et)):(n(),d("img",st)),t("div",ot,[t("p",nt,l(o.name),1),t("div",lt,[t("p",it," IDR "+l(Number(o.sub_total).toLocaleString()),1),t("div",at,[u(v,{class:"py-1 px-2",onClick:w=>F(o)},{default:c(()=>[a("+")]),_:2},1032,["onClick"]),t("span",null,l(o.quantity),1),u(v,{class:"py-1 px-2",onClick:w=>L(o)},{default:c(()=>[a("-")]),_:2},1032,["onClick"])])]),t("div",{class:"mt-3",onClick:w=>V(o)},[t("p",ct,[a(" Note: "),t("span",rt,l(o.notes),1)]),t("p",_t,[a(" Disc: "),t("span",ut,l(o.discount)+" %",1)])],8,dt),t("div",mt,[o.is_sent_to_kitchen==0?(n(),d("p",ft,xt)):o.is_done==1?(n(),d("p",bt,[vt,t("span",kt,l(_(b)(o.time_done).format("HH:mm")),1)])):o.is_processed==1?(n(),d("p",gt,[yt,t("span",wt,l(_(b)(o.time_processed).format("HH:mm")),1)])):o.is_sent_to_kitchen==1?(n(),d("p",Ct,[Dt,t("span",St,l(_(b)(o.time_sent_to_kitchen).format("HH:mm")),1)])):U("",!0)]),Nt])]))),128))]),t("div",Bt,[t("div",It,[$t,t("p",jt," IDR "+l(Number(_($)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Tt,[qt,t("p",Ft," IDR "+l(Number(_(T)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Lt,[Vt,t("p",Et," IDR "+l(Number(_(x)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),t("div",Ht,[Ot,t("p",Rt," IDR "+l(Number(_(g)).toLocaleString(void 0,{maximumFractionDigits:0})),1)]),At,t("div",Yt,[Ut,t("p",Mt," IDR "+l(Number(_(y)).toLocaleString(void 0,{maximumFractionDigits:0})),1)])]),t("div",null,[_(O)?(n(),p(N,{key:0,disabled:"",class:"w-full mt-8"},{default:c(()=>[a("Send to kitchen ")]),_:1})):(n(),p(N,{key:1,class:"w-full mt-8",onClick:H},{default:c(()=>[a("Send to kitchen ")]),_:1}))]),t("div",null,[i.carts.length>0&&_(R)?(n(),p(B,{key:0,class:"w-full mt-8",onClick:q},{default:c(()=>[a("Checkout Now ")]),_:1})):(n(),p(B,{key:1,disabled:"",class:"w-full mt-8"},{default:c(()=>[a("Checkout Now ")]),_:1}))])])):(n(),d("div",zt,Pt))]),u(P,{show:f.value,onClose:s[3]||(s[3]=o=>f.value=!1)},{title:c(()=>[Gt]),content:c(()=>[u(I,{for:"notes",value:"Notes"}),M(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=o=>r.notes=o),class:"w-full border border-slate-300 rounded-md p-2",rows:"3"},null,512),[[z,r.notes]]),u(I,{for:"notes",value:"Discount (%)",class:"mt-3"}),u(G,{modelValue:r.discount,"onUpdate:modelValue":s[1]||(s[1]=o=>r.discount=o),type:"number",class:"w-full border border-slate-300 rounded-md p-2"},null,8,["modelValue"])]),footer:c(()=>[t("div",Kt,[u(J,{onClick:E},{default:c(()=>[a("Update")]),_:1}),u(v,{onClick:s[2]||(s[2]=o=>f.value=!f.value)},{default:c(()=>[a(" Back ")]),_:1})])]),_:1},8,["show"])],64))}};export{ne as default};
